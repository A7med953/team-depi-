<section>
  <header>
    <h2>Medical Records</h2>
  </header>

  <!-- Add New Record -->
  <div class="add-record">
    <h3>Add New Record</h3>
    <form (ngSubmit)="addRecord()">
      <div class="form-group">
        <input type="text" placeholder="Record Title" [(ngModel)]="newRecord.title" name="title" required />
        <input type="text" placeholder="Type (Medication / Condition / Allergy)" [(ngModel)]="newRecord.type" name="type" required />
      </div>
      <div class="form-group">
        <textarea placeholder="Details..." [(ngModel)]="newRecord.details" name="details" required></textarea>
      </div>
      <button type="submit" class="btn-primary">Add Record</button>
    </form>
  </div>

  <!-- Records List -->
  <div class="record-section" *ngFor="let record of records; let i = index">
    <div class="section-header">
      <i class="fa fa-folder-open"></i>
      <h3>{{ record.title }}</h3>
      <div class="actions">
        <button class="edit" (click)="editRecord(i)"><i class="fa fa-edit"></i></button>
        <button class="delete" (click)="deleteRecord(i)"><i class="fa fa-trash"></i></button>
      </div>
    </div>

    <div *ngIf="editedRecordIndex !== i; else editForm" class="card-body">
      <p><strong>Type:</strong> {{ record.type }}</p>
      <p><strong>Details:</strong> {{ record.details }}</p>
    </div>

    <ng-template #editForm>
      <div class="edit-form">
        <input [(ngModel)]="editedRecord.title" placeholder="Title" />
        <input [(ngModel)]="editedRecord.type" placeholder="Type" />
        <textarea [(ngModel)]="editedRecord.details" placeholder="Details"></textarea>
        <button (click)="saveRecord(i)" class="btn-primary">Save</button>
        <button (click)="cancelEdit()" class="btn-secondary">Cancel</button>
      </div>
    </ng-template>
  </div>
</section>
