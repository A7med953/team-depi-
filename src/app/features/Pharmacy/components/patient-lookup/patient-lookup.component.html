<div class="container">
  <h1>ğŸ” Patient Lookup</h1>


  <div class="search-bar">
    <input type="text" placeholder="Search by patient name or phone..." #searchInput />
    <button (click)="filterPatients(searchInput.value)">Search</button>
  </div>


  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Age</th>
        <th>Last Visit</th>
        <th>Doctor</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of filteredPatients">
        <td>{{ p.name }}</td>
        <td>{{ p.phone }}</td>
        <td>{{ p.age }}</td>
        <td>{{ p.lastVisit }}</td>
        <td>{{ p.doctor }}</td>
        <td>
          <button class="view-btn" (click)="viewPatient(p)">View</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="patient-details" id="patient-details">
    <div class="patient-header" *ngIf="selectedPatient">
      <div class="patient-avatar">{{ selectedPatient.name.charAt(0).toUpperCase() }}</div>
      <div class="patient-info">
        <h3>{{ selectedPatient.name }}</h3>
        <p>ğŸ“ {{ selectedPatient.phone }}</p>
        <p>ğŸ‚ {{ selectedPatient.age }} years old</p>
        <p>ğŸ  {{ selectedPatient.address }}</p>
        <p>ğŸ‘¨â€âš•ï¸ Doctor: {{ selectedPatient.doctor }}</p>
        <p>ğŸ“… Last Visit: {{ selectedPatient.lastVisit }}</p>
        <button (click)="closeDetails()" style="margin-top:8px; background:#ff4d4f; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">Close</button>
      </div>
    </div>

    <h4 *ngIf="selectedPatient">ğŸ§¾ Prescription History</h4>
    <table class="prescriptions-table" *ngIf="selectedPatient">
      <thead>
        <tr>
          <th>Date</th>
          <th>Doctor</th>
          <th>Diagnosis</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let pr of selectedPatient.prescriptions">
          <td>{{ pr.date }}</td>
          <td>{{ pr.doctor }}</td>
          <td>{{ pr.diagnosis }}</td>
          <td>{{ pr.status }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
